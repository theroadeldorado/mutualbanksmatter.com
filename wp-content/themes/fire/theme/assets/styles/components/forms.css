@layer components {
  .form-required {
    &::after {
      @apply ml-1;
      @apply text-red-400;
      content: '*';
    }
  }

  /* Shared form input styles for all forms */
  .login-section,
  .login-form,
  .reset-form,
  .profile-form,
  .gform_wrapper {
    .form-field,
    .gfield {
      @apply w-full mb-6;
    }

    label,
    .gform_label {
      @apply block text-base text-white mb-1;
    }

    [type='text'],
    input:where(:not([type])),
    [type='email'],
    [type='url'],
    [type='password'],
    [type='number'],
    [type='date'],
    [type='datetime-local'],
    [type='month'],
    [type='search'],
    [type='tel'],
    [type='time'],
    [type='week'],
    [multiple],
    textarea,
    select {
      @apply bg-transparent border-0 border-b-2 border-white py-2 px-0 w-full text-lg text-white placeholder:text-gray-300;
      outline: none !important;
      box-shadow: none !important;

      &:focus,
      &:focus-visible {
        @apply outline-none shadow-none border-b-light-blue;
        outline: none !important;
        box-shadow: none !important;
      }
    }

    /* Alpine.js cloak */
    [x-cloak] {
      @apply hidden;
    }

    input[type='checkbox'],
    input[type='radio'] {
      @apply accent-light-blue;
      accent-color: #64bfdd;
    }

    /* Custom checkbox styling */
    input[type='checkbox'] {
      @apply appearance-none w-5 h-5 border-2 border-white rounded cursor-pointer relative shrink-0;
      background-color: transparent;

      &:checked {
        @apply bg-light-blue border-light-blue;
      }

      &:checked::after {
        content: '';
        @apply absolute inset-0 flex items-center justify-center;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z'/%3E%3C/svg%3E");
        background-size: 100%;
        background-position: center;
        background-repeat: no-repeat;
      }

      &:focus,
      &:focus-visible {
        @apply outline-none ring-2 ring-light-blue ring-offset-2 ring-offset-charcoal;
        outline: none !important;
        box-shadow: none !important;
      }
    }
  }

  .button-light-blue {
    @apply button bg-light-blue text-charcoal ring-light-blue ring-1;

    &:hover,
    &:active {
      @apply bg-white text-charcoal ring-white;
    }
  }

  /* Gravity Forms specific styles */
  .gform_wrapper {
    @apply w-full;

    textarea {
      @apply max-h-[150px];
    }

    .gform_submission_error,
    .gfield_validation_message {
      @apply text-red-400 text-sm;
    }

    .gfield_error {
      [type='text'],
      input:where(:not([type])),
      [type='email'],
      [type='url'],
      [type='password'],
      [type='number'],
      [type='date'],
      [type='datetime-local'],
      [type='month'],
      [type='search'],
      [type='tel'],
      [type='time'],
      [type='week'],
      [multiple],
      textarea,
      select {
        @apply border-b-red-400;
      }

      .gfield_label {
        @apply text-red-400;
      }
    }

    .gfield--type-captcha {
      .gfield_label {
        @apply hidden;
      }
    }

    .gform_confirmation_message {
      @apply text-center text-lg;
    }
  }

  /* ActiveCampaign Embedded Form Overrides */
  /* Target forms by ID pattern to avoid relying on unstable class names */
  form[id^='_form_'] {
    /* Reset embedded form container styles */
    @apply !w-full !border-2 !border-white !rounded-lg !p-6 !bg-transparent !m-0 !max-w-full;
    font-family: inherit !important;

    /* Override all font imports and families */
    *,
    ._form-label,
    ._form_element,
    label,
    input,
    textarea,
    button,
    ._form-content,
    ._row span,
    ._row label {
      font-family: inherit !important;
    }

    /* Form elements */
    ._form_element {
      @apply !w-full !mb-6 !max-w-full;
    }

    /* Labels */
    ._form-label,
    label {
      @apply !block !text-base !text-white !mb-1 !font-thin;
    }

    /* Required field indicator */
    .field-required {
      @apply !ml-1 !text-red-400;
    }

    /* Input fields - override all embedded styles */
    input[type='text'],
    input[type='email'],
    input[type='tel'],
    input[type='date'],
    textarea {
      @apply !bg-transparent !border-0 !border-b-2 !border-white !py-2 !px-0 !w-full !text-lg !text-white !rounded-none !h-auto;
      outline: none !important;
      box-shadow: none !important;

      &::placeholder {
        opacity: 0.7 !important;
      }

      &:focus,
      &:focus-visible {
        @apply !outline-none !shadow-none !border-b-light-blue !bg-transparent;
        outline: none !important;
        box-shadow: none !important;
      }
    }

    input[type='checkbox'],
    input[type='radio'] {
      @apply accent-light-blue;
      accent-color: #64bfdd;
    }

    /* Custom checkbox styling */
    input[type='checkbox'] {
      @apply appearance-none w-5 h-5 border-2 border-white rounded cursor-pointer relative shrink-0;
      background-color: transparent;

      &:checked {
        @apply bg-light-blue border-light-blue;
      }

      &:checked::after {
        content: '';
        @apply absolute inset-0 flex items-center justify-center;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z'/%3E%3C/svg%3E");
        background-size: 100%;
        background-position: center;
        background-repeat: no-repeat;
      }

      &:focus,
      &:focus-visible {
        @apply outline-none ring-2 ring-light-blue ring-offset-2 ring-offset-charcoal;
      }
    }

    /* Textarea specific */
    textarea {
      @apply !max-h-[150px] !resize-y;
    }

    /* Submit button */
    ._submit,
    button[type='submit'],
    button._submit {
      @apply button !bg-light-blue !text-charcoal !ring-light-blue !ring-1 !cursor-pointer !px-6 !py-[14px] !text-base !text-center !rounded-lg !w-auto !mt-4;
      -webkit-appearance: none !important;
      transition: all 0.2s ease !important;

      &:hover,
      &:active {
        @apply !bg-white !text-charcoal !ring-white;
      }

      &:disabled {
        @apply !cursor-not-allowed !opacity-40;
      }
    }

    /* Button wrapper */
    ._button-wrapper {
      @apply !m-0 !p-0;
    }

    /* Error states */
    ._has_error,
    input._has_error,
    textarea._has_error {
      @apply !border-b-red-400 !border-t-0 !border-l-0 !border-r-0;
    }

    ._error {
      @apply !text-red-400 !text-sm !relative !block !mt-1 !bg-transparent !p-0 !border-0 !shadow-none;
    }

    ._error-inner {
      @apply !text-red-400 !text-sm !pt-2 !bg-transparent !px-0 !pb-0 !border-0 !shadow-none !text-left !m-0;
    }

    ._error-arrow {
      @apply !hidden;
    }

    /* Success message */
    ._form-thank-you {
      @apply !text-center !text-lg !text-white;
    }

    /* Hide branding */
    ._form-branding {
      @apply !hidden;
    }

    /* Clear floats */
    ._clear-element {
      clear: both !important;
    }

    /* Field wrapper */
    ._field-wrapper {
      @apply !relative !w-full;
    }

    /* Form content */
    ._form-content {
      @apply !m-0 !w-full;
    }
  }
}
